# Паттерн «Компиляция Спецификации»

## 1. Контекст

Для многих рутинных задач разработки процесс ручного составления полной, формализованной `Спецификации` (`Spec`) может быть излишне многословным и трудоемким, создавая "человеческий" барьер. Однако строгость и ясность формальной `Спецификации` являются необходимым условием для надежной генерации кода с помощью ИИ.

## 2. Паттерн

Для разрешения этого противоречия паттерн **«Компиляция Спецификации»** вводит двухуровневый рабочий процесс, который отделяет стратегический `Замысел` от детальной `Спецификации`. Этот паттерн делегирует трудоемкую работу по составлению формальной `Спецификации` ИИ-агенту, оставляя инженеру-практику исключительно стратегическую роль.

Рабочий процесс выглядит следующим образом:

1.  **Бриф (`Brief`) (составляется человеком):** Практик IDGL составляет краткий, высокоуровневый и часто неформальный документ на естественном языке. `Бриф` описывает цель задачи, не детализируя точные критерии проверки.

2.  **«Компилятор Спецификаций» (`Spec Compiler`) (ИИ-агент):** Вызывается специализированный ИИ-агент. Его роль заключается в получении `Брифа` от человека и полного контекста любого релевантного исходного кода.

3.  **Спецификация (`Spec`) (генерируется ИИ):** ИИ «Компилятор Спецификаций» обрабатывает `Бриф` и контекст кода, и его результатом является полный, формализованный и верифицируемый документ `Спецификации`. Эта сгенерированная `Спецификация` затем используется «Рабочим ИИ» (`Worker AI`) для выполнения окончательной генерации кода.

### 2.1. Ключевое требование: «Тесты по умолчанию»

Критическим требованием паттерна «Компиляция Спецификации» является принцип **«Тесты по умолчанию» (`Tests by Default`)**. ИИ «Компилятор Спецификаций» должен быть явно проинструктирован генерировать `Спецификацию`, включающую комплексный план верификации и тестирования.

Правильно скомпилированная `Спецификация` **ОБЯЗАТЕЛЬНО** должна содержать раздел `Критерии Верификации`, разделенный как минимум на два подраздела:
*   **Критерии Реализации:** Детализированный чек-лист для основного артефакта(ов) кода.
*   **Критерии Тестирования:** Детализированный чек-лист для соответствующего файла с тестами, определяющий исчерпывающий набор модульных тестов.

Это обеспечивает высокий стандарт качества и гарантирует, что каждый сгенерированный артефакт имеет соответствующий, сгенерированный ИИ, план для своей собственной валидации.

## 3. Пример реализации

Данный паттерн реализован в примере проекта `01-react-refactor-with-tests`. Скрипт `assemble-spec-prompt.ps1` является инструментом, который подготавливает входные данные для ИИ «Компилятора Спецификаций», а его главный шаблон промпта (`spec-compiler.md`) содержит встроенные инструкции, обеспечивающие соблюдение принципа «Тесты по умолчанию».
