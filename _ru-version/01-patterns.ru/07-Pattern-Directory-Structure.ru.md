# Структура Каталогов IDGL

## Руководящие Принципы

Структура каталогов IDGL — это читаемое представление плана выполнения для генеративной задачи. Она делает явным различие между последовательной и параллельной работой и обеспечивает отслеживаемость всей работы. Она хранится отдельно от исходного кода проекта, в идеале в корневой папке `.idgl/`.

---

## I. Структура Одной Генеративной Задачи

Одна генеративная задача является фундаментальной единицей работы. Ее структура каталогов отражает план выполнения, необходимый для ее завершения.

### Пример 1: Последовательный План (с Вложенностью)
Этот пример показывает, как задача разбивается на два последовательных шага. Первый шаг (`01-create-database-schema`) сам по себе является сложной задачей, требующей собственной внутренней декомпозиции, что демонстрирует рекурсивный характер структуры.

```
[name-of-generative-task]/
├── 📄 intent.md
├── 📄 validation_summary.md
├── 📁 artifact/
├── 📁 decomposition/
│   ├── 📁 01-create-database-schema/
│   │   ├── 📄 intent.md
│   │   ├── ...
│   │   └── 📁 decomposition/
│   │       └── 📁 01-define-user-entity/
│   │           └── ... (Это вложенная подзадача)
│   │
│   └── 📁 02-seed-data/
│       └── ... (Эта подзадача зависит от предыдущей)
└── 📁 records/
    └── ...
```

### Пример 2: Параллельный План (Fork-Join)
Независимые задачи выполняются одновременно, а затем интегрируются.

```
[name-of-generative-task]/
├── 📄 intent.md
├── 📄 validation_summary.md
├── 📁 decomposition/
│   └── 📁 parallel/
│       ├── 📁 create-auth-api/
│       │   └── ... (Полная генеративная задача)
│       └── 📁 create-login-ui/
│           └── ... (Полная генеративная задача)
├── 📁 compilation/
│   └── 📁 integrate-ui-and-api/
│       └── ... (Полная генеративная задача)
├── 📁 refinement/
│   └── 📁 [name-of-refinement-task]/
│       └── ... (Полная генеративная задача, например, "fix-login-bug")
└── 📁 records/
    └── ...
```

### Пример 3: Простая Задача (Без Оркестрации)
Это самый распространенный случай. Задача достаточно проста и не требует разбиения. В ней нет папок `decomposition`, `compilation`, `research` или `refinement`.

```
[name-of-generative-task]/
├── 📄 intent.md
├── 📄 validation_summary.md
├── 📁 artifact/
└── 📁 records/
    └── ...
```

### Универсальные Компоненты Задачи

*   **`intent.md`**: Цель для этой конкретной задачи.
*   **`validation_summary.md`**: Окончательный результат задачи.
*   **`artifact/`**: Необязательный каталог для хранения сгенерированного вывода.
*   **`records/`**: Каталог, содержащий **[Записи о Генерации](./06-Pattern-Generation-Record.md)** для этой задачи, которые логируют принятые стратегические решения.
*   **`decomposition/`, `research/`, `compilation/`, `refinement/`**: Папки, содержащие подзадачи, которые сами являются полными генеративными задачами.

---

## II. Структура на Уровне Проекта

Каталог `.idgl` организован так, чтобы отражать два основных режима **[жизненного цикла проекта IDGL](./08-Pattern-Lifecycle-Phases.md)**: формальные **Фазы Разработки** для крупных эпиков и каталог `sustaining/` для инкрементальной работы.

### Регистрация Крупных Эпиков (как Фазы Разработки)

При добавлении нового крупного набора функций добавляется новая, пронумерованная папка **Фазы Разработки**. Это логирует основные исторические вехи проекта.

```
.idgl/
│
├── 📁 01-scaffolding-phase/
├── 📁 02-authentication-phase/
└── 📁 03-product-catalog-phase/  // <-- Новая фаза для нового крупного эпика
```

### Регистрация Инкрементальных Изменений (в Каталоге Поддержки)

Для более мелких, специальных задач работа регистрируется в каталоге верхнего уровня `sustaining/`, который организован по функциональностям. Для баланса между простотой использования и долгосрочной масштабируемостью, каждая папка функциональности использует гибридную модель "активное рабочее пространство против холодного архива".

```
.idgl/
│
└── 📁 sustaining/
    │
    └── 📁 authentication/                 // Контекст конкретной функциональности
        │
        ├── 📁 fix-recent-login-bug/      // <-- Новые задачи создаются здесь в виде плоского списка
        ├── 📁 add-new-tooltip/          // <-- для чистого, активного рабочего пространства
        │
        └── 📁 archive/                  // <-- Выделенное место для старых, завершенных задач
            │
            ├── 📁 2024/
            │   ├── 📁 fix-old-bug-from-q3/
            │   └── 📁 another-old-task/
            │
            └── 📁 2023/
                └── ...

```

#### Рабочий Процесс

*   **Для Активного Разработчика:** Рабочий процесс прост и не создает трения. Практик, работающий над новым исправлением ошибки, создает новую папку задачи непосредственно в соответствующем каталоге функциональности (например, `sustaining/authentication/`). Список папок, который он видит, представляет собой чистый, релевантный список текущей и недавней работы.

*   **Для Долгосрочного Курирования:** Чтобы предотвратить превращение активного рабочего пространства в свалку, используется периодический процесс архивирования. В конце квартала или года завершенные папки задач просто перемещаются из корня каталога функциональности в соответствующий подкаталог `archive/[year]/`.

Этот подход "золотой середины" обеспечивает лучшее из обоих миров: простую, плоскую структуру для повседневной работы и масштабируемый, организованный архив для долгосрочной истории проекта.

---

## III. Структура Репозитория IDGL

### Обоснование

Для поддержания чистого и масштабируемого проекта артефакты процесса (история, замыслы и планы IDGL) должны быть физически отделены от конечных, развертываемых артефактов кода. Это самый высокий уровень организации в проекте, управляемом IDGL.

Эта структура определяет корневую структуру с двумя основными каталогами: `<project>` и `<artifact>`.

### Структура Репозитория Верхнего Уровня

```
<project-root>/
│
├── 📁 .idgl/
│   │   (Содержит все артефакты методологии IDGL)
│   └── ...
│
├── 📁 src/
├── 📄 package.json
└── ... (Остальной конечный, канонический исходный код)
```

### Объяснение Ключевых Компонентов

*   **`<project-root>/`**: Корневой каталог всего проекта.

*   **`.idgl/`**: Этот каталог находится в корне проекта и содержит все метаданные, связанные с процессом IDGL.

*   **Исходный Код (`src/`, `package.json` и т.д.)**: Фактический, чистый исходный код приложения находится в корне проекта рядом с каталогом `.idgl/`. Это конечный `Результат` фаз разработки и представляет собой канонический артефакт. Эта стандартная структура гарантирует, что история и методология не обременяют конечный продукт.

