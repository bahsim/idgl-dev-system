# Паттерн: Компиляция Спецификации

## 1. Суть Паттерна
Самый ценный актив Архитектора — это его стратегический фокус. Ручное составление полной, формальной `Спецификации` для каждой рутинной задачи может быть нерациональным использованием этого фокуса. Паттерн **Компиляция Спецификации** — это решение Архитектора для этой проблемы.

Этот паттерн делегирует трудоемкую работу по написанию формальной `Спецификации` агенту ИИ. Это позволяет Архитектору оставаться в чисто стратегической роли, сосредоточенной на определении высокоуровневого намерения, а не на мельчайших деталях.

## 2. Как Применять Паттерн
Рабочий процесс включает в себя два ключевых артефакта и специализированного агента ИИ:

1.  **`Бриф` (Директива Архитектора):** Архитектор составляет короткий, высокоуровневый и часто неформальный документ на естественном языке. `Бриф` описывает цель задачи, не детализируя точные критерии проверки.

2.  **«Компилятор Спецификаций» (Агент ИИ):** Вызывается специализированный агент ИИ. Его роль заключается в получении `Брифа` Архитектора и полного контекста любого релевантного исходного кода.

3.  **`Спецификация` (Сгенерированный ИИ Контракт):** ИИ «Компилятор Спецификаций» обрабатывает `Бриф` и контекст кода, и его выводом является полный, формальный и проверяемый документ `Спецификации`. Эта сгенерированная `Спецификация` затем используется другим агентом ИИ для выполнения окончательной генерации кода.

## 3. Критическое Правило: Тесты по Умолчанию
Непреложное правило этого паттерна — принцип **«Тесты по Умолчанию»**. Архитектор должен поручить ИИ «Компилятору Спецификаций» сгенерировать `Спецификацию`, которая включает в себя комплексный план верификации и тестирования.

Правильно скомпилированная `Спецификация` **ДОЛЖНА** содержать раздел `Критерии Проверки`, который разделен как минимум на две подсекции:

*   **Критерии Реализации:** Детальный чеклист для основного(ых) артефакта(ов) кода.
*   **Критерии Тестирования:** Детальный чеклист для соответствующего файла тестов, определяющий комплексный набор модульных тестов.

Это обеспечивает высокий стандарт качества и гарантирует, что каждый сгенерированный артефакт имеет соответствующий, сгенерированный ИИ план для его собственной валидации.

## 4. Пример в Действии
Этот паттерн реализован в примере проекта `01-react-refactor-with-tests`. Скрипт `assemble-spec-prompt.ps1` — это инструмент, который подготавливает входные данные для ИИ «Компилятора Спецификаций», а его основной шаблон промпта (`spec-compiler.md`) содержит встроенные инструкции, которые обеспечивают соблюдение принципа «Тесты по Умолчанию».
