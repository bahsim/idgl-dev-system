# Паттерн: Компонуемые Промпты

## 1. Суть Паттерна
По мере того как инструкции Архитектора для его агентов ИИ («мета-промпты») становятся все более сложными, жесткое их кодирование в скриптах автоматизации становится негибким и нарушает принцип «Не повторяйся» (DRY).

Паттерн **Компонуемые Промпты** решает эту проблему, применяя принципы программной инженерии к управлению промптами. Он создает систему, в которой шаблоны промптов являются внешними, декларативными файлами, которые могут импортировать и компоновать переиспользуемые компоненты, точно так же, как исходный код.

## 2. Как Применять Паттерн
Этот паттерн требует двух ключевых компонентов:

1.  **Инструмент-препроцессор:** Скрипт или инструмент сборки, который понимает специальную директиву включения (например, `@import "path/to/partial.md"`). Его задача — прочитать основной файл шаблона, найти все такие директивы и рекурсивно заменить их содержимым указанных «частичных» файлов. Этот процесс создает одну, полностью «скомпилированную» строку промпта.

2.  **Компонуемая структура файлов:** Выделенный каталог для шаблонов (например, `prompt-templates/`), который содержит:
    *   **Основные шаблоны:** Файлы, определяющие высокоуровневую структуру для конкретного промпта (например, `spec-compiler-prompt.md`). Они содержат директивы `@import` для составления конечного промпта.
    *   **Частичные файлы (`_partials/`):** Файлы, содержащие переиспользуемые фрагменты текста (например, `system-preamble.md`). Они являются единственным источником истины для любого инструктивного текста, используемого в нескольких основных шаблонах.

## 3. Преимущества
*   **Поддерживаемость:** Общие инструкции определены только в одном месте.
*   **Масштабируемость:** Новые шаблоны промптов можно быстро создавать, компонуя существующие частичные файлы.
*   **Разделение ответственности:** «Движок» (препроцессор) четко отделен от «конфигурации» (шаблонов промптов), что позволяет Архитектору изменять инструкции для ИИ, не меняя никакого кода.

## 4. Пример в Действии
Этот паттерн реализован в каталоге `idgl-dev-system/02-implementation/scripts/`. Скрипт `idgl-template-engine.ps1` служит препроцессором для директивы `@import`. Каталог `prompt-templates/` содержит основной шаблон `spec-compiler.md` и импортируемый им частичный файл `_partials/preamble-spec-definition.md`.

---

## От Теории к Практике: Библиотека Протоколов для Агентов ИИ
Этот паттерн — не просто теоретическая концепция. Это основной принцип, лежащий в основе **Библиотеки Протоколов для Агентов ИИ**, которая является «программным обеспечением», приводящим в действие наших партнеров ИИ.

Эта библиотека содержит набор готовых, профессиональных «основных шаблонов», которые вы можете использовать для настройки универсального ИИ в специализированного агента для конкретной задачи.

**[→ Узнайте, как использовать Протоколы для Агентов ИИ здесь.](../../10-agent-protocols/README.md)**
