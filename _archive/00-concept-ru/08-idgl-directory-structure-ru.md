# Структура каталогов IDGL

## Руководящие принципы

Структура каталогов IDGL — это удобочитаемое представление плана выполнения генеративной задачи. Она делает различие между последовательной и параллельной работой явным и обеспечивает отслеживаемость всей работы. Она хранится отдельно от исходного кода проекта, в идеале — в корневой папке `.idgl/`.

---

## I. Структура одной генеративной задачи

Одна генеративная задача — это фундаментальная единица работы. Структура ее каталога отражает план выполнения, необходимый для ее завершения.

### Пример 1: Последовательный план (с вложенностью)
Этот пример показывает разбиение задачи на два последовательных шага. Первый шаг (`01-create-database-schema`) сам по себе является сложной задачей, требующей собственной внутренней декомпозиции, что демонстрирует рекурсивную природу структуры.

```
[название-генеративной-задачи]/
├── 📄 intent.md
├── 📄 validation_summary.md
├── 📁 artifact/
├── 📁 decomposition/
│   ├── 📁 01-create-database-schema/
│   │   ├── 📄 intent.md
│   │   ├── ...
│   │   └── 📁 decomposition/
│   │       └── 📁 01-define-user-entity/
│   │           └── ... (Это вложенная подзадача)
│   │
│   └── 📁 02-seed-data/
│       └── ... (Эта подзадача зависит от предыдущей)
└── 📁 history/
    └── ...
```

### Пример 2: Параллельный план (Fork-Join)
Независимые задачи выполняются одновременно, а затем интегрируются.

```
[название-генеративной-задачи]/
├── 📄 intent.md
├── 📄 validation_summary.md
├── 📁 decomposition/
│   └── 📁 parallel/
│       ├── 📁 create-auth-api/
│       │   └── ... (Завершенная генеративная задача)
│       └── 📁 create-login-ui/
│           └── ... (Завершенная генеративная задача)
├── 📁 compilation/
│   └── 📁 integrate-ui-and-api/
│       └── ... (Завершенная генеративная задача)
├── 📁 refinement/
│   └── 📁 [название-задачи-уточнения]/
│       └── ... (Завершенная генеративная задача, например, "fix-login-bug")
└── 📁 history/
    └── ...
```

### Пример 3: Простая задача (без оркестрации)
Это самый распространенный случай. Задача достаточно проста, чтобы ее не нужно было разбивать. У нее нет папок `decomposition`, `compilation`, `research` или `refinement`.

```
[название-генеративной-задачи]/
├── 📄 intent.md
├── 📄 validation_summary.md
├── 📁 artifact/
└── 📁 history/
    └── ...
```

### Универсальные компоненты задачи

*   **`intent.md`**: Цель для этой конкретной задачи.
*   **`validation_summary.md`**: Итоговый результат задачи.
*   **`artifact/`**: Необязательный каталог для хранения сгенерированного вывода для этой задачи.
*   **`history/`**: Журнал стратегических решений, принятых в ходе выполнения этой задачи.
*   **`decomposition/`, `research/`, `compilation/` и `refinement/`**: Папки, содержащие подзадачи, которые сами по себе являются завершенными генеративными задачами.

### Подробнее о папке `history`

Папка `history` предоставляет хронологический, проверяемый журнал стратегических решений, принятых во время работы над задачей. Вот краткий пример:

```
📁 history/
│
├── 📁 1/
│   │   (Первая попытка решения)
│   ├── 📄 intent.md
│   │   "Создать компонент поиска, используя простой фильтр массива."
│   ├── 📄 validation_summary.md
│   │   "Работает, но неэффективен для больших наборов данных. Нужен новый подход."
│   └── 📁 artifact/
│       └── ... (Код для компонента простого фильтра)
│
├── 📁 2/
│   │   (Вторая попытка, уточнение стратегии на основе предыдущей проверки)
│   ├── 📄 intent.md
│   │   "Перестроить компонент поиска, используя более производительную библиотеку, такую как Fuse.js."
│   ├── 📄 validation_summary.md
│   │   "Успех. Производительность отличная."
│   └── 📁 artifact/
│       └── ... (Код для компонента Fuse.js)
│
└── 📁 3/
    │   (Решение по оркестрации для другой задачи)
    ├── 📄 intent.md
    │   "Эта проблема слишком сложна. Разбить ее на подзадачи A и B."
    └── 📁 decomposition/
        ├── 📄 (маркер для 'подзадачи-A')
        └── 📄 (маркер для 'подзадачи-B')

```
Этот пример показывает, как история регистрирует как разные попытки решения (Запись 1 против 2), так и стратегические решения по оркестрации (Запись 3).

---

## II. Структура проекта: Последовательность фаз

Реальный проект представляет собой последовательность **Фаз разработки**, как определено в `../01-patterns/07-idgl-development-phase.md`. Корневой каталог `.idgl` организован в пронумерованные папки фаз.

Каждая папка фазы строго следует 5-ступенчатому процессу разработки. Структура папки напрямую представляет первые четыре шага работы, а пятый шаг (`Конечный результат`) является артефактом, помещенным в основное дерево исходного кода.

```
.idgl/
├── 📁 01-scaffolding-phase/
│   │   (Эта папка представляет одну Фазу разработки)
│   │
│   ├── 📄 main_goal.md                 (Шаг 1: Цель для этой фазы)
│   ├── 📁 01_system_design/            (Шаг 2: Генеративная задача для проектирования)
│   ├── 📁 02_comprehensive_plan/       (Шаг 3: Генеративная задача, которая генерирует план)
│   └── 📁 03_execution/                (Шаг 4: Контейнер для рабочих задач)
│       └── 📁 01_execute_scaffold/     (Фактическая рабочая задача из плана)
│           └── ... (Завершенная генеративная задача)
├── 📁 ... (другие фазы)
│
└── 📁 N-authentication-phase/
    │
    ├── 📄 main_goal.md
    ├── 📁 01_system_design/
    ├── 📁 02_comprehensive_plan/
    └── 📁 03_execution/
        ├── 📁 01_build_auth_api/           (Фактическая рабочая задача из плана)
        │   └── ... (Завершенная генеративная задача)
        ├── 📁 02_build_login_ui/           (Фактическая рабочая задача из плана)
        │   └── ... (Завершенная генеративная задача)
        └── 📁 03_integrate_components/     (Фактическая рабочая задача из плана)
            └── ... (Завершенная генеративная задача)
```

### Объяснение структуры фазы

Эта структура делает рабочий процесс явным и последовательным для каждой фазы:

1.  **Главная цель:** Представлена `main_goal.md`.
2.  **Проектирование системы:** Первая генеративная задача, `01_system_design/`.
3.  **Комплексный план:** Вторая генеративная задача, `02_comprehensive_plan/`. Ее выполнение заполняет каталог `03_execution/` необходимыми папками задач.
4.  **Итеративное выполнение:** Представлено папкой `03_execution/`. Эта папка содержит последовательность всех генеративных задач, которые необходимо выполнить для достижения главной цели фазы.
5.  **Конечный результат:** Это не папка. Это конечный артефакт, созданный последней задачей в папке `03_execution/`, который затем помещается в свое правильное место в основном исходном коде проекта.

## III. Схема репозитория IDGL

## Обоснование

Для поддержания чистого и масштабируемого проекта артефакты процесса (история, намерения и планы IDGL) должны быть физически отделены от конечных, развертываемых артефактов кода. Это самый высокий уровень организации в проекте, управляемом IDGL.

Эта схема определяет корневую структуру с двумя основными каталогами: `<project>` и `<artifact>`.

## Структура репозитория верхнего уровня

```
<project-root>/
│
├── 📁 .idgl/
│   │   (Содержит все артефакты методологии IDGL)
│   └── ...
│
├── 📁 src/
├── 📄 package.json
└── ... (Остальная часть окончательного, канонического исходного кода)
```

### Объяснение ключевых компонентов

*   **`<project-root>/`**: Корневой каталог всего проекта.

*   **`.idgl/`**: Этот каталог находится в корне проекта и содержит все метаданные, связанные с процессом IDGL.

*   **Исходный код (`src/`, `package.json` и т. д.)**: Фактический, чистый исходный код приложения находится в корне проекта рядом с каталогом `.idgl/`. Это конечный `Результат` фаз разработки и представляет собой канонический артефакт. Эта стандартная схема гарантирует, что история и методология не обременяют конечный продукт. 